<script type="text/javascript" src="http://pubnub.github.io/eon/lib/eon-chart.js"></script>
<link type="text/css" rel="stylesheet" href="http://pubnub.github.io/eon/lib/eon.css" />
<div id="chart"></div>
<script type="text/javascript">
var __eon_pubnub = PUBNUB.init({
  subscribe_key: "sub-c-5f1b7c8e-fbee-11e3-aa40-02ee2ddab7fe"
});
var __eon_cols = ["radiation_level","humidity","timestamp","photosensor","ambient_temperature"]; 
var __eon_labels = {}; 
chart = eon.chart({
  pubnub: __eon_pubnub,
  channel: "pubnub-sensor-network",
  history: true,
  flow: true,
  rate: 1000,
  limit: 5,
  xcolumn: "timestamp",
  generate: {
    bindto: "#chart",
    data: {
      colors: {"radiation_level":"#D70060","humidity":"#E54028","timestamp":"#F18D05","photosensor":"#113F8C","ambient_temperature":"#01A4A4"},
      type: "spline"
    },
    transition: {
      duration: 250
    },
    axis: {
      y: {
        label: ""
      }
    },
    grid: {
      x: {
        show: false 
      },
      y: {
        show: false 
      }
    },
    tooltip: {
     show: true
    },
    point: {
      show: true
    }
  },
  transform: function(message) {
    var message = eon.c.flatten(message);
    var array = __eon_cols.map(function(arg){
      return [__eon_labels[arg] || arg, message[arg]];
    });
    return {
      columns: array
    };
  }
});
</script>