<html>
  <head>

    <link rel="stylesheet" type="text/css" href="../bower_components/c3/c3.min.css">
    <script src="../bower_components/pubnub/dist/web/pubnub.min.js"></script>
    <script src="../bower_components/d3/d3.min.js"></script>
    <script src="../bower_components/c3/c3.min.js"></script>
    <script src="../bower_components/visibilityjs/lib/visibility.core.js"></script>

    <script src="../pubnub-c3.js"></script>

  </head>
  <body>
    <div id="chart"></div>
    <script>
    // using the example stream from 
    // http://www.pubnub.com/developers/data-streams/sensor-network
    var pubnub = new PubNub({
        subscribeKey: 'sub-c-5f1b7c8e-fbee-11e3-aa40-02ee2ddab7fe',
        ssl: true
	});
    eon.chart({
    	pubnub: pubnub,
	    channel: 'pubnub-sensor-network',
        limit: 100,
        rate: 10,
        ssl: true,
    	generate: {
            transition: {
                duration: 3
            },
    	    bindto: '#chart',
    	    data: {
				x: 'x'
    	    },
    	    axis: {
    	      	x: {
    	            type: 'timeseries',
	    	        tick: {
	    	            format: '%H:%m:%S'
	    	        }
    	      	}
    	    }
    	},
	    transform: function(m) {

	    	return {
                eon: {
    	    		'Humidy': m.humidity,
    	    		'Temperature': m.ambient_temperature,
    	    		'Light': m.photosensor
	    	    }
            }
	    }
	});
    </script>
  </body>
</html>
