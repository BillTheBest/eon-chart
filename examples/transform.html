<html>
  <head>

    <link rel="stylesheet" type="text/css" href="../bower_components/c3/c3.min.css">
    <script src="../bower_components/pubnub/web/pubnub.min.js"></script>
    <script src="../bower_components/d3/d3.min.js"></script>
    <script src="../bower_components/c3/c3.min.js"></script>
    <script src="../bower_components/subsub/subsub.js"></script>
    <script src="../bower_components/visibilityjs/lib/visibility.core.js"></script>
    <script src="../pubnub-c3.js"></script>

  </head>
  <body>
    <div id="chart"></div>
    <script>
    // using the example stream from 
    // http://www.pubnub.com/developers/data-streams/sensor-network
    var pubnub = PUBNUB.init({
        subscribe_key: 'sub-c-2a73818c-d2d3-11e3-9244-02ee2ddab7fe'
	});
    eon.chart({
    	pubnub: pubnub,
    	history: false,
	    channel: 'pubnub-sensor-network',
    	flow: true,
        limit: 30,
        x_id: 'timestamp',
        x_type: 'custom',
        debug: true,
    	generate: {
            transition: {
                duration: 1
            },
    	    bindto: '#chart',
    	    data: {
				x: 'x',
				labels: true
    	    },
    	    axis: {
    	      	x: {
    	            type: 'timeseries',
	    	        tick: {
	    	            format: '%H:%m:%S'
	    	        }
    	      	}
    	    }
    	},
	    transform: function(m) {

	    	return {
                eon: {
                    'timestamp': new Date().getTime(),
    	    		'Humidy': m.humidity,
    	    		'Temperature': m.ambient_temperature,
    	    		'Light': m.photosensor
	    	    }
            }
	    }
	});
    </script>
  </body>
</html>
